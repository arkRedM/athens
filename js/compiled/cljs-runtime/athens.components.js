goog.provide('athens.components');
athens.components.todo_on_click = (function athens$components$todo_on_click(uid,from_str,to_str){
var current_block_content = new cljs.core.Keyword("block","string","block/string",-2066596447).cljs$core$IFn$_invoke$arity$1(athens.db.get_block(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("block","uid","block/uid",-1623585167),uid], null)));
return re_frame.core.dispatch(new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"transact","transact",-267998670),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword("block","uid","block/uid",-1623585167),uid,new cljs.core.Keyword("block","string","block/string",-2066596447),clojure.string.replace(current_block_content,from_str,to_str),new cljs.core.Keyword("edit","time","edit/time",1384867476),athens.util.now_ts()], null)], null)], null));
});
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"todo","todo",-1046442570),(function (_content,uid){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"checkbox",new cljs.core.Keyword(null,"checked","checked",-50955819),false,new cljs.core.Keyword(null,"on-change","on-change",-732046149),(function (){
return athens.components.todo_on_click(uid,/\{\{\[\[TODO\]\]\}\}/,"{{[[DONE]]}}");
})], null)], null);
}));
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"done","done",-889844188),(function (_content,uid){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"type","type",1174270348),"checkbox",new cljs.core.Keyword(null,"checked","checked",-50955819),true,new cljs.core.Keyword(null,"on-change","on-change",-732046149),(function (){
return athens.components.todo_on_click(uid,/\{\{\[\[DONE\]\]\}\}/,"{{[[TODO]]}}");
})], null)], null);
}));
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"youtube","youtube",-1932361085),(function (content,_uid){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.media-16-9","div.media-16-9",-1557022170),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"iframe","iframe",884422026),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"src","src",-1651076051),["https://www.youtube.com/embed/",cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.get.cljs$core$IFn$_invoke$arity$2(cljs.core.re_find(/.*v=([a-zA-Z0-9_\-]+)/,content),(1)))].join(''),new cljs.core.Keyword(null,"allow","allow",-1857325745),"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"], null)], null)], null);
}));
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"iframe","iframe",884422026),(function (content,_uid){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.media-16-9","div.media-16-9",-1557022170),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"iframe","iframe",884422026),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"src","src",-1651076051),cljs.core.re_find(/http.*/,content)], null)], null)], null);
}));
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"self","self",-1547428899),(function (content,_uid){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"color","color",1011675173),"red",new cljs.core.Keyword(null,"font-family","font-family",-667419874),"IBM Plex Mono"], null)], null),content], null);
}));
athens.components.block_embed_adjustments = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"background","background",-863952629),athens.style.color.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"background-minus-2","background-minus-2",-1711017591)),new cljs.core.Keyword("stylefy.core","manual","stylefy.core/manual",-1053755369),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,">.block-container",">.block-container",-1169473817),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"margin-left","margin-left",2015598377),"0",new cljs.core.Keyword("stylefy.core","manual","stylefy.core/manual",-1053755369),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,".textarea",".textarea",661898183),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"background","background",-863952629),"transparent"], null)], null)], null)], null)], null)], null)], null);
athens.parse_renderer.componentx.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"block-embed","block-embed",-417443082),(function (content,_uid){
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div.block-embed","div.block-embed",1649385290),stylefy.core.use_style.cljs$core$IFn$_invoke$arity$1(athens.components.block_embed_adjustments),(function (){var block = athens.db.get_block_document((new cljs.core.PersistentVector(null,2,(5),cljs.core.PersistentVector.EMPTY_NODE,[new cljs.core.Keyword("block","uid","block/uid",-1623585167),cljs.core.last(cljs.core.re_find(/\(\((.+)\)\)/,content))],null)));
var block_random_uid = cljs.core.random_uuid();
return new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [athens.views.blocks.block_el,com.rpl.specter.impl.compiled_transform_STAR_((function (){var info__49458__auto__ = athens.components.pathcache65806;
var info__49458__auto____$1 = (((info__49458__auto__ == null))?(function (){var info65807 = com.rpl.specter.impl.magic_precompilation(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [com.rpl.specter.impl.__GT_FnInvocation(com.rpl.specter.impl.__GT_VarUse(athens.util.rec_path,new cljs.core.Var(function(){return athens.util.rec_path;},new cljs.core.Symbol("athens.util","rec-path","athens.util/rec-path",1179367398,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"athens.util","athens.util",-1545422462,null),new cljs.core.Symbol(null,"rec-path","rec-path",1942449691,null),"athens/util.cljs",15,1,207,207,cljs.core.list(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"afn","afn",216963467,null)], null)),null,(cljs.core.truth_(athens.util.rec_path)?athens.util.rec_path.cljs$lang$test:null)])),new cljs.core.Symbol(null,"rec-path","rec-path",1942449691,null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [com.rpl.specter.impl.__GT_SpecialFormUse((function (p1__65805_SHARP_){
return cljs.core.contains_QMARK_(p1__65805_SHARP_,new cljs.core.Keyword("block","uid","block/uid",-1623585167));
}),cljs.core.list(new cljs.core.Symbol(null,"fn*","fn*",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null)], null),cljs.core.list(new cljs.core.Symbol(null,"contains?","contains?",-1676812576,null),new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null),new cljs.core.Keyword("block","uid","block/uid",-1623585167))))], null),cljs.core.list(new cljs.core.Symbol(null,"rec-path","rec-path",1942449691,null),cljs.core.list(new cljs.core.Symbol(null,"fn*","fn*",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null)], null),cljs.core.list(new cljs.core.Symbol(null,"contains?","contains?",-1676812576,null),new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null),new cljs.core.Keyword("block","uid","block/uid",-1623585167)))))], null),"athens.components",cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"rec-path","rec-path",1942449691,null),cljs.core.list(new cljs.core.Symbol(null,"fn*","fn*",-752876845,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null)], null),cljs.core.list(new cljs.core.Symbol(null,"contains?","contains?",-1676812576,null),new cljs.core.Symbol(null,"p1__65805#","p1__65805#",2139564180,null),new cljs.core.Keyword("block","uid","block/uid",-1623585167)))], null));
athens.components.pathcache65806 = info65807;

return info65807;
})():info__49458__auto__);
var precompiled65808 = com.rpl.specter.impl.cached_path_info_precompiled(info__49458__auto____$1);
var dynamic_QMARK___49459__auto__ = com.rpl.specter.impl.cached_path_info_dynamic_QMARK_(info__49458__auto____$1);
if(cljs.core.truth_(dynamic_QMARK___49459__auto__)){
var G__65809 = new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [athens.util.rec_path,(function (p1__65805_SHARP_){
return cljs.core.contains_QMARK_(p1__65805_SHARP_,new cljs.core.Keyword("block","uid","block/uid",-1623585167));
})], null);
return (precompiled65808.cljs$core$IFn$_invoke$arity$1 ? precompiled65808.cljs$core$IFn$_invoke$arity$1(G__65809) : precompiled65808.call(null,G__65809));
} else {
return precompiled65808;
}
})(),(function (p__65810){
var map__65811 = p__65810;
var map__65811__$1 = (((((!((map__65811 == null))))?(((((map__65811.cljs$lang$protocol_mask$partition0$ & (64))) || ((cljs.core.PROTOCOL_SENTINEL === map__65811.cljs$core$ISeq$))))?true:false):false))?cljs.core.apply.cljs$core$IFn$_invoke$arity$2(cljs.core.hash_map,map__65811):map__65811);
var block__$1 = map__65811__$1;
var uid = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__65811__$1,new cljs.core.Keyword("block","uid","block/uid",-1623585167));
return cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(block__$1,new cljs.core.Keyword("block","uid","block/uid",-1623585167),[cljs.core.str.cljs$core$IFn$_invoke$arity$1(uid),"-embed-",cljs.core.str.cljs$core$IFn$_invoke$arity$1(block_random_uid)].join(''),cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword("block","original-uid","block/original-uid",591552700),uid], 0));
}),block),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"linked-ref","linked-ref",-925333945),false], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"block-embed?","block-embed?",-216201089),true], null)], null);
})()], null);
}));

//# sourceMappingURL=athens.components.js.map
